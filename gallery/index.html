---
layout: default
title: Fotogalerie
permalink: /galerie/
---

<div class="content-wrapper page-content">
<div class="page-header-with-pagination">
  <h1>Fotogalerie</h1>
  <div class="pagination" id="paginationTop"></div>
</div>

<div class="event-grid" id="galleryGrid">
{% assign albums = site.posts | where_exp: "post", "post.categories contains 'gallery'" | sort: 'date' | reverse %}
{% for album in albums %}
  <a href="{{ album.url | relative_url }}" class="event-card-link" data-gallery-item>
    <div class="event-card">
      <img src="{% if album.cover %}{{ album.cover }}{% else %}/logo.png{% endif %}" alt="{{ album.title }}" class="event-image{% unless album.cover %} fallback-image{% endunless %}" loading="lazy">
      <div class="event-content">
        <h3 class="event-title">{{ album.title }}</h3>
        <p class="event-date">
          <svg class="event-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
            <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4H1z"/>
          </svg>
          {{ album.date_created | date: "%d.%m.%Y" }}
        </p>
        {% if album.photos %}
        <p class="album-count">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16" style="vertical-align: middle; margin-right: 5px;">
            <path d="M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/>
            <path d="M2.002 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2h-12zm12 1a1 1 0 0 1 1 1v6.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12V3a1 1 0 0 1 1-1h12z"/>
          </svg>
          {{ album.photos.size }} fotek
        </p>
        {% endif %}
      </div>
    </div>
  </a>
{% endfor %}
</div>

{% if albums.size == 0 %}
<p>Zatím zde nejsou žádná alba.</p>
{% endif %}

<div class="pagination" id="pagination"></div>

<script>
(function() {
    const itemsPerPage = 9;
    let currentPage = 1;

    const galleryItems = document.querySelectorAll('[data-gallery-item]');
    const paginationTop = document.getElementById('paginationTop');
    const paginationBottom = document.getElementById('pagination');
    const totalPages = Math.ceil(galleryItems.length / itemsPerPage);

    function showPage(page, scrollToTop = true) {
        currentPage = page;

        galleryItems.forEach((item, index) => {
            const startIndex = (page - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;

            if (index >= startIndex && index < endIndex) {
                item.style.display = 'block';
            } else {
                item.style.display = 'none';
            }
        });

        renderPagination();
        if (scrollToTop) {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    }

    function renderPagination() {
        if (totalPages <= 1) {
            paginationTop.innerHTML = '';
            paginationBottom.innerHTML = '';
            return;
        }

        let html = '<div class="pagination-container">';

        if (currentPage > 1) {
            html += `<button class="pagination-btn" onclick="galleryPagination.goToPage(${currentPage - 1})">← Předchozí</button>`;
        }

        html += '<div class="pagination-numbers">';
        for (let i = 1; i <= totalPages; i++) {
            if (i === 1 || i === totalPages || (i >= currentPage - 1 && i <= currentPage + 1)) {
                const activeClass = i === currentPage ? 'active' : '';
                html += `<button class="pagination-number ${activeClass}" onclick="galleryPagination.goToPage(${i})">${i}</button>`;
            } else if (i === currentPage - 2 || i === currentPage + 2) {
                html += '<span class="pagination-dots">...</span>';
            }
        }
        html += '</div>';

        if (currentPage < totalPages) {
            html += `<button class="pagination-btn" onclick="galleryPagination.goToPage(${currentPage + 1})">Další →</button>`;
        }

        html += '</div>';
        paginationTop.innerHTML = html;
        paginationBottom.innerHTML = html;
    }

    window.galleryPagination = {
        goToPage: showPage
    };

    showPage(1, false);
})();
</script>

<style>
.album-count {
    margin-top: 0.5rem;
    color: #666;
    font-size: 0.9rem;
}
</style>
</div>
